<template>
  <div class="layer-theme-demo">
    <h3>ä¸»é¢˜å˜ä½“æ¼”ç¤º</h3>
    
    <div class="theme-buttons">
      <el-button 
        v-for="theme in themes" 
        :key="theme.value"
        :type="theme.type"
        @click="showLayer(theme.value)"
      >
        {{ theme.label }}
      </el-button>
    </div>
    
    <!-- ä¸åŒä¸»é¢˜çš„å¼¹å±‚ -->
    <c7-layer
      v-if="currentLayer === 'default'"
      title="é»˜è®¤ä¸»é¢˜å¼¹å±‚"
      theme="default"
      @close="closeLayer"
      @back="handleBack"
    >
      <div class="layer-content">
        <h4>é»˜è®¤ä¸»é¢˜</h4>
        <p>è¿™æ˜¯é»˜è®¤ä¸»é¢˜çš„å¼¹å±‚ï¼Œé€‚ç”¨äºå¤§å¤šæ•°é€šç”¨åœºæ™¯ã€‚</p>
        <ul>
          <li>ç®€æ´çš„è®¾è®¡é£æ ¼</li>
          <li>ä¸­æ€§çš„é¢œè‰²æ­é…</li>
          <li>è‰¯å¥½çš„å¯è¯»æ€§</li>
        </ul>
      </div>
      
      <template #footer>
        <el-button @click="closeLayer">å…³é—­</el-button>
        <el-button type="primary" @click="handleConfirm">ç¡®å®š</el-button>
      </template>
    </c7-layer>
    
    <c7-layer
      v-if="currentLayer === 'primary'"
      title="ä¸»è¦ä¸»é¢˜å¼¹å±‚"
      theme="primary"
      @close="closeLayer"
      @back="handleBack"
    >
      <div class="layer-content">
        <h4>ä¸»è¦ä¸»é¢˜</h4>
        <p>è¿™æ˜¯ä¸»è¦ä¸»é¢˜çš„å¼¹å±‚ï¼Œç”¨äºé‡è¦çš„æ“ä½œå’Œä¿¡æ¯å±•ç¤ºã€‚</p>
        <el-alert
          title="é‡è¦æç¤º"
          type="info"
          description="è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ“ä½œï¼Œè¯·ä»”ç»†é˜…è¯»ç›¸å…³è¯´æ˜ã€‚"
          show-icon
          :closable="false"
        />
      </div>
      
      <template #footer>
        <el-button @click="closeLayer">å–æ¶ˆ</el-button>
        <el-button type="primary" @click="handleConfirm">ç¡®è®¤æ“ä½œ</el-button>
      </template>
    </c7-layer>
    
    <c7-layer
      v-if="currentLayer === 'success'"
      title="æˆåŠŸä¸»é¢˜å¼¹å±‚"
      theme="success"
      @close="closeLayer"
      @back="handleBack"
    >
      <div class="layer-content">
        <h4>æ“ä½œæˆåŠŸ</h4>
        <div class="success-content">
          <el-icon size="48" color="#67c23a">
            <SuccessFilled />
          </el-icon>
          <p>æ­å–œï¼æ‚¨çš„æ“ä½œå·²ç»æˆåŠŸå®Œæˆã€‚</p>
          <div class="success-details">
            <p>âœ… æ•°æ®å·²ä¿å­˜</p>
            <p>âœ… é€šçŸ¥å·²å‘é€</p>
            <p>âœ… æ—¥å¿—å·²è®°å½•</p>
          </div>
        </div>
      </div>
      
      <template #footer>
        <el-button type="success" @click="closeLayer">å¤ªå¥½äº†</el-button>
      </template>
    </c7-layer>
    
    <c7-layer
      v-if="currentLayer === 'warning'"
      title="è­¦å‘Šä¸»é¢˜å¼¹å±‚"
      theme="warning"
      @close="closeLayer"
      @back="handleBack"
    >
      <div class="layer-content">
        <h4>æ³¨æ„äº‹é¡¹</h4>
        <el-alert
          title="è­¦å‘Š"
          type="warning"
          description="æ­¤æ“ä½œå¯èƒ½ä¼šå½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œå»ºè®®åœ¨ä¸šåŠ¡ä½å³°æœŸæ‰§è¡Œã€‚"
          show-icon
          :closable="false"
        />
        <div class="warning-list">
          <p><strong>è¯·æ³¨æ„ï¼š</strong></p>
          <ul>
            <li>æ“ä½œä¸å¯é€†è½¬</li>
            <li>å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´</li>
            <li>å»ºè®®æå‰å¤‡ä»½æ•°æ®</li>
          </ul>
        </div>
      </div>
      
      <template #footer>
        <el-button @click="closeLayer">å–æ¶ˆ</el-button>
        <el-button type="warning" @click="handleConfirm">æˆ‘å·²äº†è§£ï¼Œç»§ç»­</el-button>
      </template>
    </c7-layer>
    
    <c7-layer
      v-if="currentLayer === 'danger'"
      title="å±é™©ä¸»é¢˜å¼¹å±‚"
      theme="danger"
      @close="closeLayer"
      @back="handleBack"
    >
      <div class="layer-content">
        <h4>å±é™©æ“ä½œç¡®è®¤</h4>
        <el-alert
          title="å±é™©æ“ä½œ"
          type="error"
          description="æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤æ•°æ®ï¼Œæ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œï¼"
          show-icon
          :closable="false"
        />
        <div class="danger-content">
          <p>æ‚¨å³å°†æ‰§è¡Œä»¥ä¸‹å±é™©æ“ä½œï¼š</p>
          <ul>
            <li>ğŸ—‘ï¸ åˆ é™¤æ‰€æœ‰ç”¨æˆ·æ•°æ®</li>
            <li>ğŸ—‘ï¸ æ¸…ç©ºç³»ç»Ÿæ—¥å¿—</li>
            <li>ğŸ—‘ï¸ é‡ç½®ç³»ç»Ÿé…ç½®</li>
          </ul>
          <el-input
            v-model="confirmText"
            placeholder="è¯·è¾“å…¥ 'DELETE' ç¡®è®¤åˆ é™¤"
            style="margin-top: 15px;"
          />
        </div>
      </div>
      
      <template #footer>
        <el-button @click="closeLayer">å–æ¶ˆ</el-button>
        <el-button 
          type="danger" 
          :disabled="confirmText !== 'DELETE'"
          @click="handleDangerousConfirm"
        >
          ç¡®è®¤åˆ é™¤
        </el-button>
      </template>
    </c7-layer>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { c7Layer } from 'c7-plus'
import { SuccessFilled } from '@element-plus/icons-vue'

// å½“å‰æ˜¾ç¤ºçš„å¼¹å±‚
const currentLayer = ref('')

// ç¡®è®¤æ–‡æœ¬
const confirmText = ref('')

// ä¸»é¢˜é…ç½®
const themes = [
  { label: 'é»˜è®¤ä¸»é¢˜', value: 'default', type: 'default' },
  { label: 'ä¸»è¦ä¸»é¢˜', value: 'primary', type: 'primary' },
  { label: 'æˆåŠŸä¸»é¢˜', value: 'success', type: 'success' },
  { label: 'è­¦å‘Šä¸»é¢˜', value: 'warning', type: 'warning' },
  { label: 'å±é™©ä¸»é¢˜', value: 'danger', type: 'danger' }
]

// æ˜¾ç¤ºå¼¹å±‚
const showLayer = (theme) => {
  currentLayer.value = theme
  confirmText.value = ''
}

// å…³é—­å¼¹å±‚
const closeLayer = () => {
  currentLayer.value = ''
  confirmText.value = ''
}

// è¿”å›å¤„ç†
const handleBack = () => {
  console.log('ç‚¹å‡»äº†è¿”å›æŒ‰é’®')
  closeLayer()
}

// ç¡®è®¤å¤„ç†
const handleConfirm = () => {
  ElMessage.success('æ“ä½œç¡®è®¤æˆåŠŸ')
  closeLayer()
}

// å±é™©æ“ä½œç¡®è®¤
const handleDangerousConfirm = () => {
  ElMessage.error('å±é™©æ“ä½œå·²æ‰§è¡Œï¼ˆæ¼”ç¤ºï¼‰')
  closeLayer()
}
</script>

<style scoped>
.layer-theme-demo {
  padding: 20px;
}

.theme-buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 20px;
}

.layer-content {
  padding: 20px 0;
}

.layer-content h4 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #303133;
}

.success-content {
  text-align: center;
  padding: 20px;
}

.success-content .el-icon {
  margin-bottom: 15px;
}

.success-details {
  margin-top: 20px;
  text-align: left;
}

.success-details p {
  margin: 8px 0;
  color: #67c23a;
}

.warning-list {
  margin-top: 15px;
}

.warning-list ul {
  margin-left: 20px;
}

.danger-content {
  margin-top: 15px;
}

.danger-content ul {
  margin: 15px 0;
  padding-left: 20px;
}

.danger-content li {
  margin: 8px 0;
  color: #f56c6c;
}

@media (max-width: 768px) {
  .theme-buttons {
    flex-direction: column;
  }
  
  .layer-content {
    padding: 10px 0;
  }
}
</style>